[build]
target = "thumbv7em-none-eabihf"

[target.thumbv7em-none-eabihf]
# Keep linker scripts for cortex-m-rt and defmt so `.defmt` is preserved
rustflags = [
  "-C", "link-arg=-Tlink.x",
  "-C", "link-arg=-Tdefmt.x",
]

# Optional: use probe-run for `cargo run` (comment out if using other tools)
runner = "probe-run --chip STM32F429ZITx"

[env]
# Default defmt log level; override per-invocation if desired
DEFMT_LOG = "info"
